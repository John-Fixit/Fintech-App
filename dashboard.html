<!DOCTYPE html>
<html lang="en">

<head>

   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">

   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">

   <title>Dashboard</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
   <link rel="stylesheet" href="style.css" />
   <link rel="stylesheet" href="css/bootstrap.min.css" />

   <link rel="stylesheet" href="style.css" />
   <link rel="stylesheet" href="css/responsive.css" />
   <link rel="stylesheet" href="css/bootstrap-select.css" />
   <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>




</head>
<style>
   li {
      font-size: 3vh !important;
   }
</style>

<body class="dashboard dashboard_1">
   <div class="full_container">
      <div class="inner_container">
         <nav id="sidebar">
            <div class="sidebar_blog_1">
               <div class="sidebar-header">
                  <div class="logo_section">
                     <a href="dashboard.html"><img class="logo_icon img-responsive"
                                src="/images/user.PNG" alt="#" /></a>
                  </div>
               </div>
               <div class="sidebar_user_info">
                  <div class="icon_setting"></div>
                  <div class="user_profle_side">
                     <div class="user_img"><a href="profile.html"><img src="/images/user.PNG" class="img-responsive" alt=""></a>
                     </div>
                     <div class="user_info">
                        <p id="userId" class="text-light">User</p>
                        <p><span class="online_animation"></span> Online</p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sidebar_blog_2">
               <h4>General</h4>
               <ul class="list-unstyled components" id="navLink">
                  <li class="active">
                     <a href="dashboard.html"><i class="fa fa-dashboard yellow_color"></i> <span>Dashboard</span></a>
                  </li>
                  <li>
                     <a href="#element" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><i
                           class="fa fa-diamond purple_color"></i> <span>Transaction Activities</span></a>
                     <ul class="collapse list-unstyled" id="element">
                        <li><a href="deposit.html">> <span>Deposit</span></a></li>
                        <li><a href="withdraw.html">> <span>Withdraw</span></a></li>
                        <li><a href="transfer.html">> <span>Transfer</span></a></li>
                     </ul>
                  </li>
                  <li><a href="table.html"><i class="fa fa-table purple_color2"></i> <span>Transaction
                           History</span></a></li>
                 
                  <li><a href="profile.html"><i class="fa fa-user yellow_color"></i> <span>User Profile</span></a>
                  </li>
                  <li><a href="settings.html"><i class="fa fa-cog yellow_color"></i> <span>Settings</span></a></li>
                  <li><a href="#" onclick="logOut()"><i class="fa fa-remove yellow_color"></i> <span>Log Out</span></a>
                  </li>
               </ul>
            </div>
         </nav>
         <div id="content">
            <div class="topbar">
               <nav class="navbar navbar-expand-lg navbar-light">
                  <div class="full">
                     <button type="button" id="sidebarCollapse" class="sidebar_toggle"><i
                           class="fa fa-bars"></i></button>
                     <div class="logo_section">
                        <a href="dashboard.html" class="text-light fs-1 fw-bold">FIX Bank</a>
                     </div>
                     <div class="right_topbar">
                        <div class="icon_info">
                           <ul>
                              <li><a href="#"><i class="fa fa-bell-o"></i><span class="badge" id="notify"
                                       onclick="notification()">4</span></a>
                              </li>
                              <li><a href="#"><i class="fa fa-envelope-o"></i><span class="badge" id="allMessage"
                                       onclick="messageBtn()">5</span></a>
                              </li>
                           </ul>
                           <ul class="user_profile_dd">
                              <li>
                                 <a class="dropdown-toggle" data-toggle="dropdown"><span class="name_user" id="userI">Action</span></a>
                                 <div class="dropdown-menu">
                                    <a class="dropdown-item" href="profile.html">My Profile</a>
                                    <a class="dropdown-item" href="settings.html">Settings</a>
                                    <a class="dropdown-item" href="help.html">Help</a>
                                    <a class="dropdown-item" href="#" onclick="logOut()"><span>Log Out</span> <i
                                          class="fa fa-sign-out"></i></a>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </nav>
            </div>
            <div class="midde_cont">
               <div class="container-fluid">
                  <div class="row column_title">
                     <div class="col-md-12">
                        <div class="page_title">
                           <h2 class="fs-1" id="title">Dashboard</h2>
                           <h3 id="customerName" style="text-transform: capitalize;"></h3>
                        </div>
                     </div>
                  </div>
                  <div id="g"></div>
                  <div class="gather" id="det">
                     <div class="row column1">
                        <div class="col-md-6 col-lg-3">
                           <div class="full counter_section margin_bottom_30">
                              <div class="couter_icon">
                                 <div>
                                    <i class="fa fa-user yellow_color"></i>
                                 </div>
                              </div>
                              <div class="counter_no">
                                 <div>
                                    <p class="total_no" id="accBal">₦0:00</p>
                                    <p class="head_couter">Account Balance</p>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                           <div class="full counter_section margin_bottom_30">
                              <div class="couter_icon">
                                 <div>
                                    <i class="fa fa-credit-card blue1_color"></i>
                                 </div>
                              </div>
                              <div class="counter_no">
                                 <div>
                                    <p class="total_no" id="credit">₦ 0:00</p>
                                    <p class="head_couter">Credit Amount</p>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                           <div class="full counter_section margin_bottom_30">
                              <div class="couter_icon">
                                 <div>
                                    <i class="fa fa-check green_color"></i>
                                 </div>
                              </div>
                              <div class="counter_no">
                                 <div>
                                    <p class="total_no" id="debit">₦0:00</p>
                                    <p class="head_couter">Debit Balance</p>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                           <div class="full counter_section margin_bottom_30">
                              <div class="couter_icon">
                                 <input type="button" name="" class="border-0 text-danger ms-5 mb-2 bg-light"
                                    id="showMe" onclick="show()" value="Show">
                                 <div>
                                    <i class="fa fa-ticket red_color"></i>
                                 </div>
                              </div>
                              <div class="counter_no">
                                 <div>
                                    <p class="total_no" id="accNo">xxxxxxxxxx</p>
                                    <p class="head_couter">Account Number</p>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="row column2 graph margin_bottom_30">
                        <div class="col-md-l2 col-lg-12">
                           <div class="white_shd full">
                              <div class="full graph_head">
                                 <div class="heading1 margin_0">
                                    <h2>Transaction Analysis</h2>
                                 </div>
                              </div>
                              <canvas id="myChart" width="5" height=""></canvas>
                              <div class="full graph_revenue">
                                 <div class="row">
                                    <div class="col-md-12">
                                       <div class="content">
                                          <div class="area_chart">

                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="row column3">
                        <div class="col-md-6">
                           <div class="dark_bg full margin_bottom_30">
                              <div class="full graph_head">
                                 <h2 class="text-light fs-1 fw-bold text-center"
                                    style="background-image: linear-gradient(to left, navy, orangeRed);">FIX BANK</h2>
                              </div>
                           </div>
                           <div class="full graph_revenue shadow">
                              <div class="row">
                                 <div class="col-md-12">
                                    <div class="content testimonial">
                                       <div id="testimonial_slider" class="carousel slide" data-ride="carousel">
                                          <div class="carousel-inner">
                                             <div class="item carousel-item active">
                                                <div class="img-box"><img src="images/layout_img/atm1.jpg" alt=""
                                                      class="w-100"></div>

                                             </div>
                                             <div class="item carousel-item">
                                                <div class="img-box opacity-100"><img
                                                      src="eduardo-soares-utWyPB8_FU8-unsplash.jpg"
                                                      class="d-block w-100" alt=""></div>

                                             </div>
                                             <div class="item carousel-item">
                                                <div class="img-box"><img src="images/layout_img/atm2.PNG"
                                                      class="d-block w-100" alt=""></div>

                                             </div>
                                          </div>
                                          <img src="" id="myImg"  alt="">
                                          <a class="carousel-control left carousel-control-prev"
                                             href="#testimonial_slider" data-slide="prev">
                                             <i class="fa fa-angle-left"></i>
                                          </a>
                                          <a class="carousel-control right carousel-control-next"
                                             href="#testimonial_slider" data-slide="next">
                                             <i class="fa fa-angle-right"></i>
                                          </a>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="container-fluid">
               <div class="footer">
                  <p>Designed By <span><a href="https://github.comm/john-fixit.com"> John Fix</a></span>
                  </p>
               </div>
            </div>
         </div>
      </div>
   </div>
   </div>

   <script src="js/jquery.min.js"></script>
   <script src="js/bootstrap.min.js"></script>
   <script src="js/custom.js"></script>
   <script>
      usersAccount = JSON.parse(localStorage.getItem("details"));
      cust = JSON.parse(localStorage.getItem("owner"))
      customerName.innerHTML = `Welcome Dear ${cust.userName}`;

      d = usersAccount.find((bal) => bal.eMail == cust.Email)
      indexOfUser = usersAccount.indexOf(d)
      userId.innerHTML = usersAccount[indexOfUser].fName;
      accBal.innerHTML = `₦ ${usersAccount[indexOfUser].userBal} : 00`

  
      if (usersAccount[indexOfUser].withdraw.length == 0) {
         lastDr = 0;
         document.getElementById("debit").innerHTML = `0: 00`
      }
      else if (usersAccount[indexOfUser].withdraw.length > 0) {
         var mm;
         var p=0
         for(e=0;e<usersAccount[indexOfUser].withdraw.length;e++){
            p+=usersAccount[indexOfUser].withdraw[e].amount;
            mm=p;
         }
         document.getElementById("debit").innerHTML = `₦ ${mm} : 00`;
      }

      if (usersAccount[indexOfUser].credit.length == 0) {
         lastCr = 0;
         document.getElementById("credit").innerHTML = `0: 00`
      }
      else if (usersAccount[indexOfUser].credit.length > 0) {
         var hh;
         var t=0
         for(b=0;b<usersAccount[indexOfUser].credit.length;b++){
            t+=usersAccount[indexOfUser].credit[b].amount;
            hh=t;
         }
         document.getElementById("credit").innerHTML = `₦ ${hh} : 00`;
      }
     
      notify.innerHTML = (usersAccount[indexOfUser].notification).length;
      allMessage.innerHTML = (usersAccount[indexOfUser].messages).length;

      cr = usersAccount[indexOfUser].chart.c
      dr = usersAccount[indexOfUser].chart.d
      var c1 = 0; var c2 = 0; var c3 = 0; var c4 = 0; var c5 = 0; var c6 = 0; var c7 = 0; var c8 = 0; var c9 = 0; var c10 = 0; var c11 = 0; var c12 = 0;
      if(cr[0].length>0){
         for(k=0;k<cr[0].length;k++){
            c1+=cr[0][k]
         }
      }
      if(cr[1].length>0){
         for(k=0;k<cr[1].length;k++){
            c2+=cr[1][k]
         }
      }
      if(cr[2].length>0){
         for(k=0;k<cr[2].length;k++){
            c3+=cr[2][k]
         }
      }
      if(cr[3].length>0){
         for(k=0;k<cr[3].length;k++){
            c4+=cr[3][k]
         }
      }
      if(cr[4].length>0){
         for(k=0;k<cr[4].length;k++){
            c5+=cr[4][k]
         }
      }
      if(cr[5].length>0){
         for(k=0;k<cr[5].length;k++){
            c6+=cr[5][k]
         }
      }
      if(cr[6].length>0){
         for(k=0;k<cr[6].length;k++){
            c7+=cr[6][k]
         }
      }
      if(cr[7].length>0){
         for(k=0;k<cr[7].length;k++){
            c8+=cr[7][k]
         }
      }
      if(cr[8].length>0){
         for(k=0;k<cr[8].length;k++){
            c9+=cr[8][k]
         }
      }
      if(cr[9].length>0){
         for(k=0;k<cr[9].length;k++){
            c10+=cr[9][k]
         }
      }
      if(cr[10].length>0){
         for(k=0;k<cr[10].length;k++){
            c11+=cr[10][k]
         }
      }
      if(cr[11].length>0){
         for(k=0;k<cr[11].length;k++){
            c12+=cr[11][k]
         }
      }



      var d1 = 0; var d2 = 0; var d3 = 0; var d4 = 0; var d5 = 0; var d6 = 0; var d7 = 0; var d8 = 0; var d9 = 0; var d10 = 0; var d11 = 0; var d12 = 0;
      if(dr[0].length>0){
         for(k=0;k<dr[0].length;k++){
            d1+=dr[0][k]
         }
      }
      if(dr[1].length>0){
         for(k=0;k<dr[1].length;k++){
            d2+=dr[1][k]
         }
      }
      if(dr[2].length>0){
         for(k=0;k<dr[2].length;k++){
            d3+=dr[2][k]
         }
      }
      if(dr[3].length>0){
         for(k=0;k<dr[3].length;k++){ 
            d4+=dr[3][k]
         }
      }
      if(dr[4].length>0){
         for(k=0;k<dr[4].length;k++){
            d5+=dr[4][k]
         }
      }
      if(dr[5].length>0){
         for(k=0;k<dr[5].length;k++){
            d6+=dr[5][k]
         }
      }
      if(dr[6].length>0){
         for(k=0;k<dr[6].length;k++){
            d7+=dr[6][k]
         }
      }
      if(dr[7].length>0){
         for(k=0;k<dr[7].length;k++){
            d8+=dr[7][k]
         }
      }
      if(dr[8].length>0){
         for(k=0;k<dr[8].length;k++){
            d9+=dr[8][k]
         }
      }
      if(dr[9].length>0){
         for(k=0;k<dr[9].length;k++){
            d10+=dr[9][k]
         }
      }
      if(dr[10].length>0){
         for(k=0;k<dr[10].length;k++){
            d11+=dr[10][k]
         }
      }
      if(dr[11].length>0){
         for(k=0;k<dr[11].length;k++){
            d12+=dr[11][k]
         }
      }
      
     
      const ctx = document.getElementById('myChart').getContext('2d');
      const myChart = new Chart(ctx, {
         type: 'line',
         data: {
            labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            datasets: [
               {
                  label: 'Credit: value recieved each month',
                  data: [c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12],
                  backgroundColor: [
                  '#FF5722',
                  ],
                  borderColor: [
                  '#FF5722',
                  ],
                  borderWidth: 1
               },
               {
                  label: 'Debit: value expensed each month',
                  data: [d1, d2, d3, d4, d5, d6, d7, d8, d9, d10, d11, d12],
                  backgroundColor: [
                     'blue',
                     
                  ],
                  borderColor: [
                     'blue',
                    
                  ],
                  borderWidth: 1
               }

            ]
         },
         options: {
            scales: {
               y: {
                  beginAtZero: true
               }
            }
         }
      });



      function show() {
         if (showMe.value == "Show") {
            accNo.innerHTML = cust.userAccId;
            showMe.value = "Hide"
         }
         else if (showMe.value == "Hide") {
            accNo.innerHTML = "xxxxxxxxxx"
            showMe.value = "Show"
         }
      }

      notification = () => {
         document.getElementById("title").innerHTML = `Notifications`
         var ms = ""
         for (r = 0; r < (usersAccount[indexOfUser].notification).length; r++) {
            ms += `<div class="card shadow mt-4 p-3" style="display: flex; justify-content: center;" id="messages">${usersAccount[indexOfUser].notification[r]}
                            <span><button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="del(${r})"><i class="fa fa-trash"></i></button><div class="modal fade" id="exampleModal" tabindex="-1"
                                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog modal-dialog-centered">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="exampleModalLabel">Attention</h5>
                                                                
                                                            </div>
                                                            <div class="modal-body text-center fs-3">
                                                                Delete this Notification?
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary"
                                                                    data-bs-dismiss="modal">Cancel</button>
                                                                 <button type="button" class="btn btn-primary" onclick="DeleteNtf()">Delete</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div></span>
                            </div>`

            g.innerHTML = ms;
            document.getElementById('det').style.display = "none"
         }
         g.innerHTML += `<button onclick="Back()" class="btn btn-primary">Back</button>`

      }
      messageBtn = () => {
         document.getElementById("title").innerHTML = `Messages`
         var ms = ""
         for (r = 0; r < (usersAccount[indexOfUser].messages).length; r++) {
            ms += `
                        <div class="card shadow mt-4 p-3" style="display: flex; justify-content: center;" id="messages">${usersAccount[indexOfUser].messages[r]}
                            <span><button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="del(${r})"><i class="fa fa-trash"></i></button><div class="modal fade" id="exampleModal" tabindex="-1"
                                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog modal-dialog-centered">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="exampleModalLabel">Attention</h5>
                                                               
                                                            </div>
                                                            <div class="modal-body text-center fs-3">
                                                                Delete this message?
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary"
                                                                    data-bs-dismiss="modal">Cancel</button>
                                                                 <button type="button" class="btn btn-primary" onclick="DeleteMsg()">Delete</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div></span>
                            </div>
                            </div>
                        `

            g.innerHTML = ms
            det.style.display = "none"
         }
         g.innerHTML += `<button onclick="Back()" class="btn btn-primary">Back</button>`
      }

      function del(r) {
         delIndex = r
      }
      function DeleteNtf() {
         mn = usersAccount[indexOfUser].notification
         mn.splice(delIndex, 1)
         localStorage.setItem("details", JSON.stringify(usersAccount));
         location.reload();

      }
      function DeleteMsg() {
         mm = usersAccount[indexOfUser].messages
         mm.splice(delIndex, 1)
         localStorage.setItem("details", JSON.stringify(usersAccount));
         location.reload();

      }


      function Back() {
         location.reload();
      }


      function logOut() {
         if (confirm("Are you sure you want to log out?")) {
            location.href = "index.html"
            localStorage.removeItem("cust")
         }
      }
   </script>
</body>

</html>